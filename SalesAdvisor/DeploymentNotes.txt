To be able to deploy the Web App correctly, need to determine the Python packages we are using in the Streamlit App along with 
Streamlit version. Use below commands to determine the versions of the packages used in the Streamlit App.

Determine the version of various Python packages we need
===========================================================
pip show azure-core
Name: azure-core
Version: 1.35.1

pip show azure-search-documents
Name: azure-search-documents
Version: 11.6.0

pip show openai
Name: openai
Version: 2.3.0

pip show python-dotenv
Name: python-dotenv
Version: 1.1.1

pip show streamlit
Name: streamlit
Version: 1.51.0

==> Update requirement.txt with proper values

To find out all the Python version supported by Azure App Service
az webapp list-runtimes --os-type linux | findstr /i python

=> Create ZIP File 
tar -a -c -f "streamlitapp.zip" app.py requirements.txt quantitative_stats.json qualitative_stats.json .streamlit

Create Resource Group and where to cretae, location like East US
Not Executed ==> az group create --name rg-sunil --location eastus
I already have rg-sunil resource Group created and going to same for this web app, so not creating a new resource group. 

==> Create App Service Plan - which command in right and what they do?
az appservice plan create --name salesadvplan --resource-group rg-sunil --sku B1 --is-linux
az webapp create --resource-group rg-sunil --plan salesadvplan --name salesadv"


==> TO set Linux VM with Python 3.13, but Windows terminal doesn't take proper value here as PYHTON|3.13, so use UI to set up Python version
az webapp config set --resource-group rg-sunil --name salesadv --linux-fx-version "PYTHON:3.13"
Best way to set up Python version is to use Azure Portal UI
Azure Portal => Web App => Settings => Configuration => General Settings => Stack,  Select "Python" and choose and minor version there as 3 and 13

==> Set Runtime Startup Command on Azure Portal UI
Azure Portal => Web App => Settings => Configuration => General Settings => Startup Command
streamlit run --server.port=$PORT --server.address=0.0.0.0 --server.headless=true app.py
==> Try this once to see if we can set it successfuly from AZ CLI, otherwise use Azure Portal UI as explained above
az webapp config set --resource-group rg-sunil --name salesadv --startup-file "streamlit run --server.port=$PORT --server.address=0.0.0.0 --server.headless=true app.py"
==> Check if it is set correctly using below command
az webapp config show --resource-group rg-sunil --name salesadv --query startupFile


==> To allow all CORS, use below command or Go to Azure Portal => Web App => API => CORS => Add *
az webapp cors add --resource-group rg-sunil --name salesadv --allowed-origins '*'

To check what value is set
az webapp config show --resource-group rg-sunil --name salesadv --query linuxFxVersion

==> ENVIRONMENT VARIABLE NEEDED => Used below command to set up below environment variables
SCM_DO_BUILD_DURING_DEPLOYMENT = TRUE was set 
WEBSITE_NODE_DEFAULT_VERSION = 18.17.0   was set 
az webapp config appsettings set --resource-group rg-sunil --name salesadv --settings SCM_DO_BUILD_DURING_DEPLOYMENT=true WEBSITE_NODE_DEFAULT_VERSION=18.17.0 STARTUP_COMMAND="streamlit run --server.port $PORT --server.address 0.0.0.0 server.headless=true app.py"
If $PORT gives issue, just remove that part and execute it. Then simply set start up command in Azure POrtal UI as explained above.

Set ENV variable => For multi-line command, use backtick ` in Powershell and need to use ^ for terminal window
az webapp config appsettings set --resource-group rg-sunil --name salesadv --settings `
OPEN_AI_KEY="Your OPEN API KEY" `
OPEN_AI_ENDPOINT="YOUR OPEN AI ENDPOINT" `
SEARCH_ENDPOINT="YOUR SEARCH ENDPOINT" `
SEARCH_KEY="YOUR SEARCH KEY" `
INDEX_NAME="YOUR SEARCH INDEX NAME" `
EMBEDDING_MODEL="text-embedding-ada-002" `
CHAT_MODEL="gpt-4o"

==> Deploy the app to Azure Web App
az webapp deployment source config-zip --resource-group rg-sunil --name salesadv --src streamlitapp.zip

==> Get URL of the deployed web app
az webapp show --resource-group rg-sunil --name salesadv --query defaultHostName

Azure Portal => Web App => Deployment Tools => Advance Tools => Go  to go to Kudus container to check where web app files are uploaded
Here we should have TAR file for web app. This is needed in TAR format for Web APP to untar and deploy when server starting. 
When we upload Streamlit APP Zip file through AZ CLI, it gets converted as TAR, so just upload ZIP file as shown below.
Use below command to deploy the ZIP file to server. Uploading MANUALLY not working since it is in Zip format. So best to use below command to deploy it.
==> az webapp deployment source config-zip --resource-group rg-sunil --name salesadv --src streamlitapp.zip


Check LOG via AZ CLI
az webapp log tail --resource-group rg-sunil --name salesadv

To find which Python version is used by our Web App, run below commands
az webapp config show --resource-group rg-sunil --name salesadv --query linuxFxVersion

==> To enable verbose logging
az webapp log config --resource-group rg-sunil --name salesadv --level verbose

==> To check environment variables for Web App
az webapp config appsettings list --resource-group rg-sunil --name salesadv

==To restart the Web App from AZ CLI
az webapp restart --resource-group rg-sunil --name salesadv

After any code changes, just use below 2 commands to deploy the latest code to Azure Web App
tar -a -c -f "streamlitapp.zip" app.py requirements.txt quantitative_stats.json qualitative_stats.json .streamlit
az webapp deployment source config-zip --resource-group rg-sunil --name salesadv --src streamlitapp.zip
az webapp restart --resource-group rg-sunil --name salesadv